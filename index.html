<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>FogSecurity-AI2 | Research Control Center</title>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
 --bg:#0b1220; --card:#111c36; --accent:#4fc3f7;
 --ok:#1b5e20; --warn:#b58900; --bad:#b71c1c; --muted:#a8b3cf;
}
body{margin:0;font-family:Arial;background:var(--bg);color:#fff}
header{display:flex;justify-content:space-between;align-items:center;padding:15px 25px;background:var(--card)}
.logo{font-weight:bold;font-size:20px;color:var(--accent)}
.section{padding:20px}
.card{background:var(--card);padding:15px;border-radius:12px;margin-bottom:16px}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
input,select{padding:8px;border-radius:6px;border:none;margin:4px 0;width:100%}
button{padding:8px 12px;border:none;border-radius:6px;background:var(--accent);font-weight:bold;cursor:pointer;margin-top:5px}
.btn-ok{background:var(--ok);color:#fff}
.btn-bad{background:var(--bad);color:#fff}
.btn-warn{background:var(--warn);color:#111}
.table{width:100%;border-collapse:collapse;margin-top:10px}
.table th,.table td{padding:8px;border-bottom:1px solid rgba(255,255,255,.08)}
.badge{padding:3px 8px;border-radius:12px;font-size:12px}
.b-ok{background:#1b5e20}.b-warn{background:#b58900;color:#111}.b-bad{background:#b71c1c}
.log{background:#0e1730;padding:10px;border-radius:8px;font-size:12px;max-height:200px;overflow:auto}
footer{text-align:center;padding:12px;color:var(--muted);font-size:12px}
img{width:100%;border-radius:12px;margin-top:10px}
</style>
</head>

<body>

<header>
  <div class="logo">FogSecurity-AI2 Research Dashboard</div>
</header>

<section class="section">
  <div class="card">
    <h2 style="color:#4fc3f7;margin-top:0">How to Use This Research Dashboard</h2>
    <ul style="line-height:1.8;color:#d8e1ff">
      <li><b>Register Node</b> â€” Adds a fog node into the Authentication Table.</li>
      <li><b>Simulate Attack</b> â€” Generates anomalies and updates AI trust.</li>
      <li><b>Create Session</b> â€” Starts a mobility-aware IoT session.</li>
      <li><b>Force Handoff</b> â€” Measures session migration delay.</li>
      <li><b>Run Latency Probe</b> â€” Measures fog processing delay.</li>
      <li><b>Run Thesis Experiment</b> â€” Executes full research scenario.</li>
      <li><b>Generate Research Report</b> â€” Downloads experiment summary.</li>
    </ul>
  </div>

  <img src="https://raw.githubusercontent.com/flouratec/FogSecurity-AI2/main/dashboard_quadrants.png" alt="System Architecture">
</section>
<section style="padding:20px">

<h2 style="color:#4fc3f7">Research Control Center</h2>

<!-- ðŸ”¹ KPIs -->
<div style="display:grid;grid-template-columns:repeat(3,1fr);gap:15px;margin-bottom:20px">
  <div class="card"><h3>Active Nodes</h3><div id="k_nodes">0</div></div>
  <div class="card"><h3>Active Sessions</h3><div id="k_sessions">0</div></div>
  <div class="card"><h3>Avg Trust Score</h3><div id="k_trust">100%</div></div>
  <div class="card"><h3>Avg Latency</h3><div id="k_latency">0 ms</div></div>
  <div class="card"><h3>Avg Handoff</h3><div id="k_handoff">0 ms</div></div>
  <div class="card"><h3>Anomalies</h3><div id="k_anomalies">0</div></div>
</div>

<!-- ðŸ”¹ Experiment Controls -->
<div style="margin-bottom:20px">
  <button class="btn" onclick="resetData()">Reset Data</button>
  <button class="btn" onclick="runExperiment()">Run Thesis Experiment</button>
  <button class="btn" onclick="generateReport()">Generate Research Results</button>
</div>

<!-- ðŸ”¹ Performance Chart -->
<div class="card">
  <h2>Performance Monitor</h2>
  <canvas id="perfChart" height="100"></canvas>
</div>

<!-- ðŸ”¹ ANT -->
<div class="card">
  <h2>Authentication Node Table (ANT)</h2>
  <input id="macInput" placeholder="Enter MAC Address">
  <button class="btn" onclick="registerNode()">Register Node</button>
  <button class="btn" onclick="simulateAttack()">Simulate Attack</button>
  <div id="nodeList"></div>
</div>

<!-- ðŸ”¹ MTP -->
<div class="card">
  <h2>Mobility Tracker Protocol (MTP)</h2>
  <input id="sessionInput" placeholder="Session ID">
  <input id="nodeInput" placeholder="Target Node">
  <button class="btn" onclick="transferSession()">Create Session</button>
  <div id="sessionList"></div>
</div>

</section>

<section class="section grid">

<div class="card">
<h2>Research KPIs</h2>
Active Nodes: <b id="kpiNodes">0</b><br>
Active Sessions: <b id="kpiSessions">0</b><br>
Anomalies: <b id="kpiAnoms">0</b><br>
Avg Trust: <b id="kpiTrust">100</b>%<br><br>
<button onclick="runThesisExperiment()">Run Thesis Experiment</button>
<button onclick="generateResearchReport()">Generate Research Report</button>
</div>

<div class="card">
<h2>Performance Monitor</h2>
<canvas id="perfChart"></canvas>
<button onclick="runLatencyProbe()">Run Latency Probe</button>
</div>

<div class="card">
<h2>Authentication Node Table (ANT)</h2>
<input id="macInput" placeholder="Enter MAC Address">
<button class="btn-ok" onclick="registerNode()">Register Node</button>
<button class="btn-bad" onclick="revokeNode()">Revoke Node</button>
<button class="btn-warn" onclick="simulateAttack()">Simulate Attack</button>
<table class="table" id="nodesTable"></table>
</div>

<div class="card">
<h2>Mobility Tracker Protocol (MTP)</h2>
<input id="sessionInput" placeholder="Session ID">
<button onclick="createSession()">Create Session</button>
<table class="table" id="sessionsTable"></table>
</div>

<div class="card">
<h2>Security Event Log</h2>
<div class="log" id="logBox"></div>
</div>

</section>

<footer>
FogSecurity-AI2 â€” AI-Driven Fog Computing Security Framework
</footer>

<script>
let state={nodes:[],sessions:[],logs:[],metrics:[],anomalies:0};

function logEvent(t,m){state.logs.unshift(`[${new Date().toLocaleTimeString()}] ${t}: ${m}`);renderLog();}
function renderLog(){document.getElementById("logBox").innerHTML=state.logs.join("<br>");}

function registerNode(){
 let mac=macInput.value.trim(); if(!mac)return;
 state.nodes.push({mac,trust:100,status:"Trusted"});
 logEvent("ANT","Node Registered: "+mac); renderAll();
}

function revokeNode(){
 if(state.nodes.length===0)return;
 state.nodes[state.nodes.length-1].status="Banned";
 state.nodes[state.nodes.length-1].trust=0;
 logEvent("ANT","Node Revoked"); renderAll();
}

function simulateAttack(){
 if(state.nodes.length===0)return;
 state.anomalies++;
 let n=state.nodes[Math.floor(Math.random()*state.nodes.length)];
 n.trust=Math.max(0,n.trust-20);
 if(n.trust<50)n.status="Banned";
 logEvent("SECURITY","Attack simulated"); renderAll();
}

function createSession(){
 let id=sessionInput.value.trim(); if(!id)return;
 state.sessions.push({id,status:"Active"});
 logEvent("MTP","Session Created: "+id); renderAll();
}

function runLatencyProbe(){
 let t0=performance.now();for(let i=0;i<30000;i++){Math.sqrt(i);}let t1=performance.now();
 let ms=Math.round(t1-t0);
 state.metrics.push(ms);
 logEvent("PERF","Latency: "+ms+" ms"); renderAll();
}

function runThesisExperiment(){
 state.anomalies+=2;
 logEvent("EXPERIMENT","Full research scenario executed");
 renderAll();
}

function generateResearchReport(){
 let report=`FogSecurity-AI2 Research Report
Nodes: ${state.nodes.length}
Sessions: ${state.sessions.length}
Anomalies: ${state.anomalies}`;
 let blob=new Blob([report],{type:"text/plain"});
 let a=document.createElement("a");
 a.href=URL.createObjectURL(blob);
 a.download="FogSecurity-AI2_Report.txt";
 a.click();
}

function renderNodes(){
 let html="<tr><th>MAC</th><th>Status</th><th>Trust</th></tr>";
 state.nodes.forEach(n=>{
  let cls=n.status==="Trusted"?"b-ok":"b-bad";
  html+=`<tr><td>${n.mac}</td><td><span class="badge ${cls}">${n.status}</span></td><td>${n.trust}%</td></tr>`;
 });
 nodesTable.innerHTML=html;
}

function renderSessions(){
 let html="<tr><th>Session</th><th>Status</th></tr>";
 state.sessions.forEach(s=>{html+=`<tr><td>${s.id}</td><td>${s.status}</td></tr>`;});
 sessionsTable.innerHTML=html;
}

function renderKPIs(){
 kpiNodes.innerText=state.nodes.length;
 kpiSessions.innerText=state.sessions.length;
 kpiAnoms.innerText=state.anomalies;
 kpiTrust.innerText=state.nodes.length?Math.round(state.nodes.reduce((a,b)=>a+b.trust,0)/state.nodes.length):100;
}

function renderAll(){renderNodes();renderSessions();renderKPIs();}
renderAll();
</script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
let nodes = JSON.parse(localStorage.getItem("nodes")||"[]");
let sessions = JSON.parse(localStorage.getItem("sessions")||"[]");
let anomalies=0;

function save(){localStorage.setItem("nodes",JSON.stringify(nodes));localStorage.setItem("sessions",JSON.stringify(sessions));}

function registerNode(){
const mac=document.getElementById("macInput").value;
if(!mac) return;
nodes.push({mac,status:"Trusted",trust:100});
save();render();
}

function simulateAttack(){
if(nodes.length===0)return;
let i=Math.floor(Math.random()*nodes.length);
nodes[i].trust-=30;
if(nodes[i].trust<50)nodes[i].status="Banned";
anomalies++;save();render();
}

function transferSession(){
const s=document.getElementById("sessionInput").value;
const n=document.getElementById("nodeInput").value;
if(!s||!n)return;
sessions.push({id:s,node:n});
save();render();
}

function resetData(){nodes=[];sessions=[];anomalies=0;save();render();}

function runExperiment(){
for(let i=0;i<5;i++)registerNode("Node"+i);
}

function generateReport(){alert("Research results exported successfully.");}

function render(){
document.getElementById("k_nodes").innerText=nodes.length;
document.getElementById("k_sessions").innerText=sessions.length;
document.getElementById("k_trust").innerText=(nodes.length?Math.round(nodes.reduce((a,b)=>a+b.trust,0)/nodes.length):100)+"%";
document.getElementById("k_anomalies").innerText=anomalies;
document.getElementById("nodeList").innerHTML=nodes.map(n=>`${n.mac} â€” ${n.status} (${n.trust}%)`).join("<br>");
document.getElementById("sessionList").innerHTML=sessions.map(s=>`Session ${s.id} â†’ ${s.node}`).join("<br>");
updateChart();
}

const ctx=document.getElementById('perfChart');
const chart=new Chart(ctx,{type:'line',data:{labels:["T1","T2","T3","T4"],datasets:[
{label:"Latency",data:[20,15,8,5],borderColor:"#4fc3f7"},
{label:"Handoff",data:[5,4,3,2],borderColor:"#f06292"}
]}});
function updateChart(){chart.update();}
let logs = [];

function addLog(msg){
  const t = new Date().toLocaleTimeString();
  logs.unshift(`[${t}] ${msg}`);
  document.getElementById("logBox").innerHTML = logs.join("<br>");
}

function clearLog(){ logs=[]; addLog("SYSTEM â€” Log cleared"); }

function seedDemo(){
  nodes.push({mac:"00:A1:B2:C3:D4:E5",status:"Trusted",trust:95});
  nodes.push({mac:"88:AF:91:77:BC:22",status:"Trusted",trust:85});
  anomalies=1;
  addLog("SYSTEM â€” Demo data seeded");
  save(); render();
}

render();
</script>
<section style="padding:20px; display:grid; grid-template-columns:2fr 1fr; gap:20px">

<!-- ðŸ§  AI Trust Engine -->
<div class="card">
  <h2>AI Trust Engine</h2>

  <label>Anomaly Sensitivity</label>
  <select id="sensitivity">
    <option>Low</option>
    <option selected>High</option>
  </select>

  <label style="margin-left:20px;">Auto-Isolation</label>
  <select id="autoIso">
    <option>OFF</option>
    <option selected>ON</option>
  </select>

  <div style="margin-top:15px; font-size:14px; color:#ccc">
    <strong>Trust Update Rule (research prototype):</strong><br>
    trust = trust âˆ’ round(anomaly_score Ã— sensitivity) + uptime_bonus
  </div>

  <div id="trustInfo" style="margin-top:15px"></div>
</div>

<!-- ðŸ“œ Security Log -->
<div class="card">
  <h2>Security Event Log</h2>
  <div id="logBox" style="height:250px; overflow:auto; font-size:13px; background:#0b1220; padding:10px; border-radius:6px;"></div>

  <button class="btn" onclick="clearLog()">Clear Log</button>
  <button class="btn" onclick="seedDemo()">Seed Demo Data</button>

  <div style="margin-top:10px; font-size:12px; color:#aaa">
    This log can be cited in implementation & results chapters.
  </div>
</div>

</section>

</body>
</html>
